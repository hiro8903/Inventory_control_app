<% provide(:title, 'All Oders') %>
<div class="table-responsive">
<h1>発注 一覧</h1>

<div class="col-md-10 col-md-offset-1">
<%= will_paginate  @orders %>

  <!-- 発注・回答・入荷一覧テーブル -->
  <table class="table table-striped  table-hover table-fixed table_sticky" id="table-orders">
    <%= form_with url: update_accept_orders_path, method: :patch, local: true do |f| %>

      <thead>
        <tr>
          <!-- 発注情報 -->
          <th>発注日</th>
          <th>仕入先</th>
          <th>塗料名</th>
          <th>発注量</th>
          <th>希望納期</th>
          <!-- 回答情報 -->
          <th><button type="submit" class="btn-sm btn-primary">返信<br>有無</button></th>
          <th>納品予定日</th>
          <th>納品数量</th>
          <th>備考</th>
          <th>入荷日</th>
          <!-- 入荷情報 -->
          <th>納入量</th>
          <th>ロット番号</th>
          <th>入荷確認</th>
          <th>請求書確認</th>
        </tr>
      </thead>

      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <!-- 発注一覧 -->
            <td><%= link_to "#{order.order_on}",edit_order_path(order) %></td>
            <td><%= order.paint.supplier.name %></td>
            <td><%= order.paint.name %></td>
            <td><%= "#{order.quantity.to_s(:delimited)} / #{order.paint.unit}" %></td>
            <td><%= order.desired_on.present? ? order.desired_on : "指定なし" %></td>

            <!-- 回答一覧 -->
            <td>
              <%= fields_for 'orders[]', order do |field| %>
              <%= field.check_box :accept %>
              <% end %>
            </td>
            <td>
                <% order.answers.all.each do |answer| %>
                <%= answer_link(order, answer, answer.answer_on) %><br>
                <% end %>
                <%= button_to_answer_the_remaining_order(order) %>
            </td>
            <td>
              <% order.answers.all.each do |answer| %>
                <%= "#{answer.quantity.to_s(:delimited)}  / #{order.paint.unit}" %><br>
              <% end %>
            </td> 
            <td>
              <% order.answers.all.each do |answer| %>
                <%= answer.note %><br>
              <% end %>
            </td> 

            <!-- 入荷一覧 -->
            <td><%=  %></td>
            <td><%=  %></td>
            <td><%=  %></td>
            <td><%=  %></td>
            <td><%=  %></td>
          </tr>
        <% end %>
      </tbody>

      <tfoot>
      </tfoot>      
    <% end %>
  </table>
<%= will_paginate %>
</div>


</div>
